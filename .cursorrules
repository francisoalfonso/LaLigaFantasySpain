# Cursor Rules - Fantasy La Liga Pro

## üî¥ INICIO DE SESI√ìN (OBLIGATORIO)

**ANTES de responder a CUALQUIER pregunta del usuario, SIEMPRE ejecutar estos pasos:**

1. ‚úÖ Leer `.claude/START_HERE.md` (√≠ndice maestro)
2. ‚úÖ Leer `.claude/rules/01-CRITICAL-RULES.md` (reglas inquebrantables)
3. ‚úÖ Leer `.claude/status/CURRENT-SPRINT.md` (estado actual)
4. ‚úÖ Confirmar en tu PRIMERA respuesta: "‚úÖ Contexto cargado: START_HERE + CRITICAL-RULES + CURRENT-SPRINT le√≠dos"

**Sin excepciones. Esto previene p√©rdida de contexto.**

---

## üìã REGLAS DURANTE LA SESI√ìN

### Antes de Crear Archivos
- ‚ùå **NUNCA** crear archivos sin leer `.claude/rules/02-development.md` primero
- ‚úÖ **SIEMPRE** buscar archivos existentes: `ls [directorio]/ | grep -i [keyword]`
- ‚úÖ **SIEMPRE** preguntar: "¬øYa existe algo similar que pueda reutilizar?"

### Antes de Codificar
- ‚úÖ Consultar `.claude/rules/03-code-style.md` para est√°ndares
- ‚úÖ Usar Winston logger (NO `console.log`)
- ‚úÖ Validar inputs con Joi
- ‚úÖ Try/catch en todas las funciones async

### Antes de Usar APIs
- ‚úÖ Consultar `.claude/rules/04-apis.md` para guidelines
- ‚úÖ Verificar documentaci√≥n oficial en `/docs/[API_NAME]_OFICIAL.md`
- ‚úÖ Aplicar rate limiting SIEMPRE

### Antes de Usar VEO3
- ‚úÖ Consultar `.claude/rules/05-veo3.md` para reglas espec√≠ficas
- ‚ùå **NUNCA** cambiar `ANA_CHARACTER_SEED=30001`
- ‚ùå **NUNCA** cambiar `ANA_IMAGE_URL`
- ‚ùå **NUNCA** crear prompts >80 palabras
- ‚úÖ **SIEMPRE** usar "speaks in Spanish from Spain" (lowercase)
- ‚úÖ **SIEMPRE** usar referencias gen√©ricas ("el jugador", NO nombres de jugadores)

---

## üéØ WORKFLOWS ESPEC√çFICOS

### Desarrollar Nueva Funcionalidad
1. Leer `.claude/workflows/new-feature.md`
2. Verificar en `.claude/status/PRIORITIES.md` que es P0/P1
3. Seguir proceso documentado

### Debugging
1. Leer `.claude/workflows/debugging.md`
2. Consultar `.claude/reference/troubleshooting.md`
3. Verificar logs con Winston

### Modificar Base de Datos
- ‚ùå **NUNCA** modificar schema sin actualizar AMBOS:
  - `database/supabase-schema.sql`
  - `database/init-database.js`
- ‚úÖ **SIEMPRE** ejecutar `npm run db:init` despu√©s de cambios

---

## üö® REGLAS CR√çTICAS QUE NUNCA SE ROMPEN

1. **Temporada La Liga**: SIEMPRE usar `season=2025` (temporada 2025-26)
2. **Ana VEO3**: NUNCA modificar seed 30001 ni imagen URL
3. **Prompts VEO3**: M√ÅXIMO 80 palabras, pattern simple
4. **Player names**: NUNCA en prompts VEO3 (usar gen√©ricos)
5. **Secrets**: NUNCA hardcodear (usar .env)
6. **Logging**: NUNCA console.log (usar Winston)
7. **Rate limiting**: SIEMPRE aplicar en APIs externas

---

## ‚úÖ VALIDACIONES AUTOM√ÅTICAS

Antes de hacer commit, verificar:

- [ ] ESLint pasa: `npm run lint`
- [ ] Tests pasan: `npm test`
- [ ] No hay `console.log` en c√≥digo
- [ ] No hay secrets hardcodeados
- [ ] Documentaci√≥n actualizada si creaste archivos

---

## üìö REFERENCIAS R√ÅPIDAS

- **Endpoints**: `.claude/reference/endpoints.md`
- **Servicios**: `.claude/reference/services.md`
- **Comandos**: `.claude/reference/commands.md`
- **Troubleshooting**: `.claude/reference/troubleshooting.md`

---

## üîÑ CIERRE DE SESI√ìN (OBLIGATORIO)

**ANTES de terminar CUALQUIER sesi√≥n:**

1. ‚úÖ Actualizar `.claude/status/CURRENT-SPRINT.md` con progreso
2. ‚úÖ Actualizar `.claude/status/PRIORITIES.md` con tareas completadas
3. ‚úÖ Actualizar `.claude/status/DECISIONS-LOG.md` con decisiones t√©cnicas
4. ‚úÖ GitHub commit con mensaje estructurado
5. ‚úÖ Push a GitHub repositorio
6. ‚úÖ Health check del sistema
7. ‚úÖ Mensaje de cierre al usuario

**SIEMPRE consultar**: `.claude/workflows/session-close.md`

---

## üéì REGLA DE ORO

**SI NO EST√Å EN `.claude/`, NO LO ASUMAS. SIEMPRE CONSULTA LA DOCUMENTACI√ìN.**

**NUNCA omitas la lectura inicial de START_HERE.md + CRITICAL-RULES.md + CURRENT-SPRINT.md.**

---

√öltima actualizaci√≥n: 2025-10-09
Versi√≥n: 1.0.0



<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Instagram Mockup - Carruseles Fantasy La Liga</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        /* iPhone 14 Pro mockup */
        .iphone-frame {
            width: 390px;
            height: 844px;
            background: #000;
            border-radius: 55px;
            padding: 12px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.4), inset 0 0 0 1px rgba(255,255,255,0.1);
            position: relative;
        }

        .iphone-notch {
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 150px;
            height: 30px;
            background: #000;
            border-radius: 0 0 20px 20px;
            z-index: 100;
        }

        .iphone-screen {
            width: 100%;
            height: 100%;
            background: #fff;
            border-radius: 45px;
            overflow: hidden;
            position: relative;
        }

        .instagram-story {
            width: 64px;
            height: 64px;
            padding: 2px;
            background: linear-gradient(45deg, #f09433 0%,#e6683c 25%,#dc2743 50%,#cc2366 75%,#bc1888 100%);
            border-radius: 50%;
        }

        .instagram-story-inner {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 3px solid #fff;
            overflow: hidden;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-purple-900 via-purple-700 to-pink-600 min-h-screen flex items-center justify-center p-8">
    <div x-data="instagramMockup()" x-init="init()">
        <!-- Back Button -->
        <div class="mb-6 flex items-center justify-between max-w-6xl mx-auto">
            <a href="/carousel-preview.html" class="text-white hover:text-purple-200 transition flex items-center space-x-2">
                <i class="fas fa-arrow-left text-xl"></i>
                <span class="font-semibold">Volver al Preview</span>
            </a>
            <button @click="refreshData()" class="bg-white/20 hover:bg-white/30 text-white px-4 py-2 rounded-lg transition">
                <i class="fas fa-sync-alt mr-2" :class="{'fa-spin': loading}"></i>
                Actualizar
            </button>
        </div>

        <!-- Main Content -->
        <div class="flex flex-col lg:flex-row gap-8 items-start justify-center max-w-6xl mx-auto">

            <!-- iPhone Mockup -->
            <div class="flex-shrink-0">
                <div class="iphone-frame">
                    <div class="iphone-notch"></div>
                    <div class="iphone-screen">

                        <!-- Instagram App -->
                        <div class="h-full flex flex-col bg-white">

                            <!-- Status Bar -->
                            <div class="px-6 pt-3 pb-2 flex items-center justify-between text-xs">
                                <span class="font-semibold">9:41</span>
                                <div class="flex items-center space-x-1">
                                    <i class="fas fa-signal text-xs"></i>
                                    <i class="fas fa-wifi text-xs"></i>
                                    <i class="fas fa-battery-full text-xs"></i>
                                </div>
                            </div>

                            <!-- Instagram Header -->
                            <div class="px-4 py-2 flex items-center justify-between border-b">
                                <svg class="h-7" viewBox="0 0 103 29" fill="none">
                                    <path d="M6.5 0C2.91 0 0 2.91 0 6.5v16C0 26.09 2.91 29 6.5 29h16c3.59 0 6.5-2.91 6.5-6.5v-16C29 2.91 26.09 0 22.5 0h-16zm0 2h16C25.44 2 27 3.56 27 6.5v16c0 2.94-1.56 4.5-4.5 4.5h-16C3.56 27 2 25.44 2 22.5v-16C2 3.56 3.56 2 6.5 2z" fill="currentColor"/>
                                    <text x="35" y="20" font-family="Arial, sans-serif" font-size="18" font-weight="bold">Instagram</text>
                                </svg>
                                <div class="flex items-center space-x-4 text-xl">
                                    <i class="far fa-plus-square"></i>
                                    <i class="far fa-heart"></i>
                                    <i class="fab fa-facebook-messenger"></i>
                                </div>
                            </div>

                            <!-- Stories -->
                            <div class="px-4 py-3 flex space-x-4 overflow-x-auto border-b">
                                <!-- Your Story -->
                                <div class="flex-shrink-0 text-center">
                                    <div class="instagram-story">
                                        <div class="instagram-story-inner">
                                            <img src="/assets/instagram/foto-perfil-FLP.png" alt="Tu historia" class="w-full h-full object-cover">
                                        </div>
                                    </div>
                                    <div class="text-xs mt-1 font-semibold">Tu historia</div>
                                </div>

                                <!-- Other Stories -->
                                <template x-for="i in 4" :key="i">
                                    <div class="flex-shrink-0 text-center">
                                        <div class="instagram-story">
                                            <div class="instagram-story-inner bg-gray-200"></div>
                                        </div>
                                        <div class="text-xs mt-1 text-gray-600">usuario_<span x-text="i"></span></div>
                                    </div>
                                </template>
                            </div>

                            <!-- Feed Post (Carousel) -->
                            <div class="flex-1 overflow-y-auto">

                                <!-- Post Header -->
                                <div class="px-4 py-3 flex items-center justify-between">
                                    <div class="flex items-center space-x-3">
                                        <img src="/assets/instagram/foto-perfil-FLP.png" alt="Fantasy La Liga Pro" class="w-8 h-8 rounded-full border border-gray-300">
                                        <div>
                                            <div class="font-semibold text-sm">laligafantasyspain</div>
                                        </div>
                                    </div>
                                    <i class="fas fa-ellipsis-v"></i>
                                </div>

                                <!-- Carousel Content - Slide Intro (Diseño Replicado) -->
                                <div class="relative aspect-[4/5] overflow-hidden" x-show="currentSlide === 0" style="background: #F9F7F4;">
                                    <!-- Contenido Principal -->
                                    <div class="h-full flex flex-col justify-between pl-8 pr-0 py-8">
                                        <!-- Título TOP CHOLLOS -->
                                        <div class="mt-12">
                                            <h1 class="text-5xl font-black text-black leading-none tracking-tight whitespace-nowrap" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;">
                                                TOP CHOLLOS
                                            </h1>
                                        </div>

                                        <!-- Badge Jornada (centrado, a la altura de las flechas) -->
                                        <div class="absolute left-1/2 transform -translate-x-1/2" style="top: calc(50% - 55px); z-index: 10;">
                                            <div class="bg-black text-white px-8 py-3 rounded-full inline-block">
                                                <span class="text-lg font-light tracking-wider" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;">
                                                    Jornada <span x-text="carouselData?.stats?.gameweek || '5'"></span>
                                                </span>
                                            </div>
                                        </div>

                                        <!-- Texto Hook + Logo Cortado -->
                                        <div class="relative pb-6">
                                            <!-- Texto Hook (más grande y estrecho) -->
                                            <div class="mb-4" style="max-width: 160px;">
                                                <p class="text-3xl font-semibold text-black leading-tight" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif; letter-spacing: -0.3px;">
                                                    Los 10 chollos que cambiarán tu jornada
                                                </p>
                                            </div>

                                            <!-- Logo FLP Cortado por Derecha (pegado al borde derecho inferior) -->
                                            <div class="absolute bottom-0 right-0" style="width: 180px; height: 180px;">
                                                <img src="/assets/instagram/logo-flp-cortado-derecha.png" alt="FLP" class="w-full h-full object-contain" style="object-position: right center;">
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Player Slides (Diseño Replicado) -->
                                <template x-for="(player, index) in carouselData?.data?.content_slides || []" :key="player.player_id">
                                    <div class="relative aspect-[4/5]" style="background: #F9F7F4;" x-show="currentSlide === index + 1">
                                        <!-- Badge Posición (superior derecha) -->
                                        <div class="absolute top-6 right-6 z-10">
                                            <div class="bg-black text-white px-6 py-2.5 rounded-full">
                                                <span class="text-sm font-light tracking-wide" x-text="player?.position"></span>
                                            </div>
                                        </div>

                                        <!-- Logo FLP Cortado (inferior izquierda - pegado al borde) -->
                                        <div class="absolute left-0 z-0" style="width: 180px; height: 180px; bottom: 24px;">
                                            <img src="/assets/instagram/logo-flp-cortado-izquierda.png" alt="FLP" class="w-full h-full object-contain" style="object-position: left center;">
                                        </div>

                                        <!-- Contenido Principal -->
                                        <div class="h-full flex flex-col items-center justify-center px-4 py-6 relative z-10">
                                            <!-- Foto del Jugador + Logo Equipo -->
                                            <div class="relative mb-3">
                                                <!-- Foto circular -->
                                                <div class="w-32 h-32 rounded-full overflow-hidden bg-white shadow-lg" style="border: 2px solid rgba(232, 93, 84, 0.15);">
                                                    <img :src="player?.photo_url"
                                                         :alt="player?.player_name"
                                                         class="w-full h-full object-cover"
                                                         onerror="this.src='https://via.placeholder.com/128?text=?'">
                                                </div>
                                                <!-- Logo equipo sobrepuesto -->
                                                <div class="absolute -bottom-1 -right-1 w-12 h-12 bg-white rounded-full shadow-md flex items-center justify-center" style="border: 2px solid #F9F7F4;">
                                                    <img :src="player?.team_logo"
                                                         class="w-9 h-9 object-contain"
                                                         onerror="this.style.display='none'">
                                                </div>
                                            </div>

                                            <!-- Nombre del Jugador -->
                                            <h2 class="text-2xl font-black text-black text-center mb-4" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif; letter-spacing: -0.3px;" x-text="player?.player_name"></h2>

                                            <!-- Stats: 3 Cards Blancas -->
                                            <div class="grid grid-cols-3 gap-2 mb-3 w-full max-w-xs">
                                                <div class="bg-white rounded-lg p-2 text-center shadow-sm">
                                                    <div class="text-2xl font-black text-black leading-none" x-text="player?.goals"></div>
                                                    <div class="text-[9px] text-gray-400 font-bold mt-1 tracking-wider">GOLES</div>
                                                </div>
                                                <div class="bg-white rounded-lg p-2 text-center shadow-sm">
                                                    <div class="text-2xl font-black text-black leading-none" x-text="player?.assists"></div>
                                                    <div class="text-[9px] text-gray-400 font-bold mt-1 tracking-wider">ASIST</div>
                                                </div>
                                                <div class="bg-white rounded-lg p-2 text-center shadow-sm">
                                                    <div class="text-2xl font-black text-black leading-none" x-text="player?.rating"></div>
                                                    <div class="text-[9px] text-gray-400 font-bold mt-1 tracking-wider">RATING</div>
                                                </div>
                                            </div>

                                            <!-- Card Negra: Precio, Ratio, Puntos -->
                                            <div class="rounded-2xl py-3 px-1 w-full max-w-xs shadow-lg" style="background: #1a1d29;">
                                                <div class="grid grid-cols-3 text-center divide-x divide-gray-700">
                                                    <div class="px-1">
                                                        <div class="text-[9px] text-gray-400 font-bold mb-1 tracking-wider">PRECIO</div>
                                                        <div class="text-xl font-black text-white leading-none" x-text="player?.price"></div>
                                                    </div>
                                                    <div class="px-1">
                                                        <div class="text-[9px] text-gray-400 font-bold mb-1 tracking-wider">RATIO</div>
                                                        <div class="text-xl font-black leading-none" style="color: #E85D54;" x-text="player?.value_ratio"></div>
                                                    </div>
                                                    <div class="px-1">
                                                        <div class="text-[9px] text-gray-400 font-bold mb-1 tracking-wider">PUNTOS</div>
                                                        <div class="text-xl font-black text-white leading-none" x-text="player?.predicted_points"></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </template>

                                <!-- CTA Slide (Clean Design) -->
                                <div class="relative bg-white aspect-[4/5]" x-show="currentSlide === totalSlides - 1">
                                    <!-- Background -->
                                    <div class="absolute inset-0 bg-gradient-to-br from-gray-50 to-white"></div>

                                    <!-- Slide Indicator -->
                                    <div class="absolute top-6 right-6 bg-gray-100 px-3 py-1 rounded-full">
                                        <span class="text-gray-600 text-xs font-medium" x-text="totalSlides + ' / ' + totalSlides"></span>
                                    </div>

                                    <!-- Main Content -->
                                    <div class="absolute inset-0 flex flex-col items-center justify-center p-8 text-center">
                                        <!-- Icon -->
                                        <div class="w-20 h-20 bg-[#E85D54] rounded-2xl flex items-center justify-center mb-6 shadow-lg">
                                            <i class="fas fa-link text-white text-3xl"></i>
                                        </div>

                                        <!-- CTA -->
                                        <h3 class="text-3xl font-black text-gray-900 mb-4 leading-tight max-w-xs" x-text="carouselData?.data?.ending_slide?.cta || 'Link en bio'"></h3>

                                        <!-- Accent Line -->
                                        <div class="w-16 h-1 bg-gradient-to-r from-[#E85D54] to-[#FF8A82] rounded-full mb-6"></div>

                                        <!-- Engagement Question -->
                                        <div class="bg-white border-2 border-gray-200 rounded-2xl p-6 mb-6 max-w-sm w-full">
                                            <p class="text-xl font-bold text-gray-900" x-text="carouselData?.data?.ending_slide?.engagement_text || '¿Cuál vas a fichar?'"></p>
                                        </div>

                                        <!-- Social -->
                                        <div class="flex items-center space-x-2 mb-4">
                                            <div class="w-8 h-8 bg-gray-900 rounded-lg flex items-center justify-center">
                                                <i class="fab fa-instagram text-white text-sm"></i>
                                            </div>
                                            <p class="text-sm text-gray-600 font-semibold" x-text="carouselData?.data?.ending_slide?.footer || '@laligafantasyspain'"></p>
                                        </div>

                                        <!-- CTA Button -->
                                        <div class="bg-gray-900 text-white px-8 py-3 rounded-full font-black text-sm shadow-lg hover:bg-gray-800 transition">
                                            SÍGUENOS →
                                        </div>

                                        <!-- Footer Dots -->
                                        <div class="mt-8 flex items-center space-x-2">
                                            <div class="w-2 h-2 bg-[#E85D54] rounded-full"></div>
                                            <div class="w-2 h-2 bg-gray-300 rounded-full"></div>
                                            <div class="w-2 h-2 bg-gray-300 rounded-full"></div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Post Actions -->
                                <div class="px-4 py-3">
                                    <div class="flex items-center justify-between mb-2">
                                        <div class="flex items-center space-x-4 text-2xl">
                                            <i class="far fa-heart"></i>
                                            <i class="far fa-comment"></i>
                                            <i class="far fa-paper-plane"></i>
                                        </div>
                                        <!-- Carousel Dots -->
                                        <div class="flex items-center space-x-1">
                                            <template x-for="i in totalSlides" :key="i">
                                                <div class="w-1.5 h-1.5 rounded-full" :class="currentSlide === i - 1 ? 'bg-blue-500' : 'bg-gray-300'"></div>
                                            </template>
                                        </div>
                                        <i class="far fa-bookmark text-2xl"></i>
                                    </div>
                                    <div class="font-semibold text-sm mb-1">2,847 Me gusta</div>
                                    <div class="text-sm">
                                        <span class="font-semibold">laligafantasyspain</span>
                                        <span class="ml-1" x-text="carouselData?.data?.intro_slide?.title || 'Top 10 Chollos'"></span>
                                        <span class="text-gray-500 ml-1">más...</span>
                                    </div>
                                    <div class="text-gray-500 text-xs mt-1">Ver los 124 comentarios</div>
                                    <div class="text-gray-400 text-xs mt-1">Hace 2 horas</div>
                                </div>

                            </div>

                            <!-- Navigation Arrows (for demo) -->
                            <div class="absolute top-1/2 left-2 right-2 flex justify-between pointer-events-none" style="transform: translateY(-50%);">
                                <button @click="prevSlide()"
                                        class="bg-white/80 hover:bg-white rounded-full w-8 h-8 flex items-center justify-center shadow-lg pointer-events-auto"
                                        :disabled="currentSlide === 0">
                                    <i class="fas fa-chevron-left text-sm"></i>
                                </button>
                                <button @click="nextSlide()"
                                        class="bg-white/80 hover:bg-white rounded-full w-8 h-8 flex items-center justify-center shadow-lg pointer-events-auto"
                                        :disabled="currentSlide === totalSlides - 1">
                                    <i class="fas fa-chevron-right text-sm"></i>
                                </button>
                            </div>

                            <!-- Bottom Navigation -->
                            <div class="border-t flex items-center justify-around py-2 bg-white">
                                <i class="fas fa-home text-xl"></i>
                                <i class="fas fa-search text-xl text-gray-400"></i>
                                <i class="far fa-plus-square text-xl text-gray-400"></i>
                                <i class="fas fa-film text-xl text-gray-400"></i>
                                <img src="/assets/instagram/foto-perfil-FLP.png" alt="Profile" class="w-6 h-6 rounded-full border border-gray-300">
                            </div>
                        </div>

                    </div>
                </div>
            </div>

            <!-- Info Panel -->
            <div class="flex-1 max-w-md">
                <div class="bg-white/10 backdrop-blur-lg rounded-xl p-6 text-white">
                    <h2 class="text-2xl font-bold mb-4">Vista Previa Instagram</h2>
                    <div class="space-y-4 text-sm">
                        <div>
                            <div class="font-semibold mb-1">📱 Formato</div>
                            <div class="text-white/80">Carrusel Instagram 4:5 (1080x1350px)</div>
                        </div>
                        <div>
                            <div class="font-semibold mb-1">🎯 Total Slides</div>
                            <div class="text-white/80"><span x-text="totalSlides"></span> slides (Intro + <span x-text="carouselData?.stats?.players_count || 0"></span> jugadores + CTA)</div>
                        </div>
                        <div>
                            <div class="font-semibold mb-1">⚽ Jornada</div>
                            <div class="text-white/80">Jornada <span x-text="carouselData?.stats?.gameweek || '-'"></span> · La Liga 2025-26</div>
                        </div>
                        <div>
                            <div class="font-semibold mb-1">💰 Precio Promedio</div>
                            <div class="text-white/80"><span x-text="carouselData?.stats?.avg_price || '-'"></span>M</div>
                        </div>
                        <div>
                            <div class="font-semibold mb-1">📊 Posiciones</div>
                            <div class="text-white/80">
                                <span x-text="carouselData?.stats?.positions?.GK || 0"></span> GK ·
                                <span x-text="carouselData?.stats?.positions?.DEF || 0"></span> DEF ·
                                <span x-text="carouselData?.stats?.positions?.MID || 0"></span> MID ·
                                <span x-text="carouselData?.stats?.positions?.FWD || 0"></span> FWD
                            </div>
                        </div>
                        <div class="pt-4 border-t border-white/20">
                            <div class="font-semibold mb-2">Navegación</div>
                            <div class="flex items-center space-x-2">
                                <button @click="prevSlide()"
                                        class="bg-white/20 hover:bg-white/30 px-3 py-2 rounded-lg transition"
                                        :disabled="currentSlide === 0">
                                    <i class="fas fa-chevron-left"></i> Anterior
                                </button>
                                <div class="flex-1 text-center">
                                    <span x-text="currentSlide + 1"></span> / <span x-text="totalSlides"></span>
                                </div>
                                <button @click="nextSlide()"
                                        class="bg-white/20 hover:bg-white/30 px-3 py-2 rounded-lg transition"
                                        :disabled="currentSlide === totalSlides - 1">
                                    Siguiente <i class="fas fa-chevron-right"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <script>
        function instagramMockup() {
            return {
                carouselData: null,
                loading: false,
                currentSlide: 0,
                totalSlides: 0,

                get currentPlayer() {
                    if (!this.carouselData?.data?.content_slides) return null;
                    const playerIndex = this.currentSlide - 1;
                    return this.carouselData.data.content_slides[playerIndex] || null;
                },

                init() {
                    this.loadCarouselData();
                },

                async loadCarouselData() {
                    this.loading = true;
                    try {
                        const response = await fetch('/api/carousels/top-chollos?limit=10');
                        const result = await response.json();

                        if (result.success) {
                            this.carouselData = result;
                            this.totalSlides = (result.data.content_slides?.length || 0) + 2; // Intro + Players + CTA
                        }
                    } catch (err) {
                        console.error(err);
                    } finally {
                        this.loading = false;
                    }
                },

                async refreshData() {
                    this.currentSlide = 0;
                    await this.loadCarouselData();
                },

                nextSlide() {
                    if (this.currentSlide < this.totalSlides - 1) {
                        this.currentSlide++;
                    }
                },

                prevSlide() {
                    if (this.currentSlide > 0) {
                        this.currentSlide--;
                    }
                }
            }
        }
    </script>
</body>
</html>
